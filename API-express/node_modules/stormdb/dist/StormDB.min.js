/*! StormDB 0.5.2 */
var StormDB=function(t){var e={};function r(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(n,s,function(e){return t[e]}.bind(null,s));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e){t.exports=class{constructor(t){this.engine=t,this.state=this.engine.init(),this.pointers=[]}default(t){return 0===Object.keys(this.state).length&&this.state.constructor===Object&&(this.state=t),this}length(){return this.pointers.push("length"),this}delete(t=!1){let e=this.state;for(let t=0;t<this.pointers.length-1;t++)e=e[this.pointers[t]];let r=this.pointers[this.pointers.length-1];Array.isArray(e)&&t?e.splice(r,1):delete e[r]}push(t){let e=this.value();if(!Array.isArray(e))throw new Error("You can only push to lists.");return e.push(t),this.set(e),this}map(t){let e=this.value();if("function"!=typeof t)throw new Error("You can only pass functions to .map().");if(!Array.isArray(e))throw new Error("You can only map lists.");return e=e.map(t),this.set(e),this}filter(t){let e=this.value();if("function"!=typeof t)throw new Error("You can only pass functions to .filter().");if(!Array.isArray(e))throw new Error("You can only filter lists.");return e=e.filter(t),this.set(e),this}sort(t){let e=this.value();if("function"!=typeof t&&void 0!==t)throw new Error("You can only pass functions or nothing to .sort().");if(!Array.isArray(e))throw new Error("You can only sort lists.");return e.sort(t),this.set(e),this}reduce(t){let e=this.value();if("function"!=typeof t)throw new Error("You can only pass functions to .reduce().");if(!Array.isArray(e))throw new Error("You can only reduce lists.");let r=e.reduce(t);return this.set(r),this}get(t){let e;e="string"==typeof t?t.split("."):[t];let r=Object.assign(Object.create(Object.getPrototypeOf(this)),this);return r.pointers=[...r.pointers,...e],r}set(t,e){if(void 0===e)this.setValue(t);else{let r;r="string"==typeof t?t.split("."):[t],this.setValue(e,r)}return this}value(){let t=this.state;for(let e=0;e<this.pointers.length;e++){if(e<this.pointers.length-1&&!t[this.pointers[e]])throw new Error("Can't run .value() on non-existant property of non-existant object.");t=t[this.pointers[e]]}return t}setValue(t,e=[],r=!0){let n=0;(e=[...this.pointers,...e]).reduce((s,i)=>{n+=1;let o=n===e.length;return r&&void 0===s[i]&&!o?(s[i]={},s[i]):o?(s[i]=t,t):s[i]},this.state)}save(){return this.engine.write(this.state)}}}]);